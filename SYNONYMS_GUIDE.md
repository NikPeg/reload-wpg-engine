# Руководство по синонимам стран

## Обзор

В модель Country добавлено новое поле `synonyms` - список синонимов названия страны. Эта функциональность позволяет:

- Админу устанавливать альтернативные названия для стран
- Игрокам использовать синонимы в команде `/send` для отправки сообщений
- Системе проверять конфликты имен при регистрации новых стран

## Для администраторов

### Редактирование синонимов

1. Используйте команду `/world` для просмотра всех стран
2. Ответьте на сообщение с информацией о стране, которую хотите отредактировать
3. Используйте следующие команды:

**Установить синонимы:**
```
синонимы ХФ, Хуан, Фернандес
```

**Очистить все синонимы:**
```
синонимы очистить
```

### Примеры использования

Если у вас есть страна "Хуан-Фернандес", вы можете добавить синонимы:
```
синонимы ХФ, Хуан, Фернандес
```

После этого игроки смогут отправлять сообщения используя любое из названий:
- `/send Хуан-Фернандес` (официальное название)
- `/send ХФ` (синоним)
- `/send Хуан` (синоним)
- `/send Фернандес` (синоним)

## Для игроков

### Отправка сообщений

Команда `/send` теперь поддерживает синонимы:

```
/send ХФ
```

Это эквивалентно:
```
/send Хуан-Фернандес
```

### Просмотр синонимов

Используйте команду `/world` для просмотра всех стран и их синонимов.

## Ограничения и проверки

### При регистрации новой страны

Система проверяет, что название новой страны не конфликтует с:
- Официальными названиями существующих стран
- Синонимами существующих стран

### При установке синонимов

Система проверяет, что новые синонимы не конфликтуют с:
- Официальными названиями других стран
- Существующими синонимами других стран

## Техническая информация

### База данных

Поле `synonyms` хранится как JSON-массив строк в таблице `countries`:
```sql
ALTER TABLE countries ADD COLUMN synonyms TEXT DEFAULT '[]' NOT NULL;
```

### Миграции

Для применения изменений в существующей базе данных:
```bash
python run_migrations.py
```

### API

Добавлен новый метод в GameEngine:
```python
async def update_country_synonyms(self, country_id: int, synonyms: list[str]) -> Country | None
```

## Примеры сценариев использования

### Сценарий 1: Длинные названия стран
Страна: "Демократическая Республика Конго"
Синонимы: "ДРК", "Конго", "Заир"

### Сценарий 2: Исторические названия
Страна: "Российская Империя"
Синонимы: "РИ", "Россия", "Империя"

### Сценарий 3: Аббревиатуры
Страна: "Соединенные Штаты Америки"
Синонимы: "США", "Америка", "Штаты"